!function(){var a=Math.pow,b=Math.round,c=Math.LN10,d=Math.log,e=function(){var e=[];return function(f){return f=f||1,void 0===e[f]&&(e[f]=b(a(d(10*f)/c,.7)*CL.maps.minMarkerSize)),e[f]}}();CL.extend("maps",{clMapsUrl:window.maptileBaseUrl,map:void 0,minMarkerSize:CL.page.isMobile?25:16,isFrozen:!1,freezeMap:function(a){(a=a||this.map)&&(a.dragging.disable(),a.touchZoom.disable(),a.doubleClickZoom.disable(),a.scrollWheelZoom.disable(),a.boxZoom.disable(),a.keyboard.disable(),a.tap&&a.tap.disable(),this.isFrozen=!0,$("#map").addClass("map-frozen"))},thawMap:function(a){(a=a||this.map)&&(a.dragging.enable(),a.touchZoom.enable(),a.doubleClickZoom.enable(),a.scrollWheelZoom.enable(),a.boxZoom.enable(),a.keyboard.enable(),a.tap&&a.tap.enable(),this.isFrozen=!1,$("#map").removeClass("map-frozen"))},marker:{create:function(a,b,c){if(a=a&&Number(a),b=b&&Number(b),!isNaN(a)&&!isNaN(b)){c=c||{};var d=L.marker([a,b],c),e=c.pids;if(Array.isArray(e)&&e.length>0){var f=this.byID,g=this.containingPID,h={marker:d,banishedCount:0,unbanishedCount:0};e.forEach(function(a){CL.banish.isBanished(a)?h.banishedCount++:h.unbanishedCount++,g[a]=h}),f[e.join(",")]=h}return d}},byID:{},containingPID:{},updateIcon:function(a){var b;b="object"!=typeof a?this.containingPID[a]:this.containingPID[a.options.pids[0]];var c=b.marker,d=c.options;c.setIcon(CL.maps.makeIcon({visited:d.visited,unbanishedCount:b.unbanishedCount,totalCount:d.numposts,fav:CL.favorites.isFavorite(d.pids[0]),marker:c}))}},openPopup:void 0,makeIcon:function(a){a=a||{};var b=a.visited?"cl-marker-icon-visited":"cl-marker-icon",c=e(a.totalCount),d=a.fav?"fav":"",f=0===a.unbanishedCount?"banished":"";return L.divIcon({className:[b,f,d].join(" "),iconSize:[c,c],html:$("<div>").text(a.text).append($("<div></div>").css({width:c+"px",height:c+"px","line-height":c+"px"}).append($("<div></div>").addClass("pal").text(a.totalCount)).append($("<div></div>").addClass("pub").text(a.unbanishedCount))).html()})},createGeoButton:function(a){CL.browser.geolocation&&$("#geocodebutton").show().on("click",function(b){b.preventDefault(),navigator.geolocation.getCurrentPosition(function(b){a.setView(new L.LatLng(b.coords.latitude,b.coords.longitude),16)},function(a){var b=$("#error").text(a).addClass("alert");if(b.length){var c=window.setTimeout(function(){b.trigger("click")},4e3);b.animate({height:b.css("line-height")||"50px"},200).click(function(){window.clearTimeout(c),b.animate({height:"0"},200),b.html("").removeClass("alert")})}})})}})}();
/* {"sources":{"maps.js":"85e7571f26cba022e959a77139259419"}} */